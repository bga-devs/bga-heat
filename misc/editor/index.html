<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="style.css" />
    <title>HEAT Circuit Editor</title>
  </head>
  <body>
    <div id="help-container" class="open">
      <div id="help-wrapper">
        <i class="fa-icon fa-close"></i>
        <h4>What is this about?</h4>
        <p>
          This allows Heat fans to make their fanmade circuit playable online on BGA. This is not a tool to help make a custom
          circuit, but instead to more easily track relevant information that BGA needs to be able to play on an unofficial board.
        </p>

        <h4>Prerequisites</h4>
        <p>
          Obviously the first thing you will need is in asset of the custom circuit you want to work with. In the following, we
          will illustrate the process with the USA map displayed below. Make sure your jpg file has a
          <b>width of 1650px</b> before moving to the next step.
        </p>
        <img src="img/tuto_usa.jpg" class="middle" />

        <h4>1] Extracting the track from the board</h4>
        <p>
          The first step consist of processing the jpg file to generate a png file that contains exactly 1 black zone for each
          cell:
        </p>
        <img src="img/tuto_cells.png" class="middle" />
        <p>Make sure to have your png file that perfectly overlays your jpg file.</p>

        <h4>2] Converting to an SVG</h4>
        <p>
          Using this cells-only asset, we will rely on inkscape to vectorize our track into an svg file where each cell
          corresponds to a path, which is what the editor will use to automatically compute the center and direction of the cells.
          Just open your png image with inkscape Vectorize matricial object
        </p>

        <h4>3] Creating the circuit in the editor</h4>
        <p>
          You have done the hardest part, now you can just open this editor and create a new circuit by filling Upload on imgur
        </p>
      </div>
    </div>

    <div id="splashscreen">
      <div id="splashbox">
        <div id="open-help"><i class="fa-icon fa-help"></i></div>
        <h1 id="title"></h1>
        <h2 id="subtitle">Circuit editor</h2>
        <div id="split-hor">
          <div id="col-create">
            <form>
              <div class="form-group">
                <label for="circuit-id">Unique id:</label>
                <input type="text" id="circuit-id" placeholder="No space, no special char. Eg: USA" />
              </div>
              <div class="form-group">
                <label for="circuit-name">Name:</label>
                <input type="text" id="circuit-name" />
              </div>
              <div class="form-group">
                <label for="circuit-jpg">URL for JPG:</label>
                <input type="text" id="circuit-jpg" />
              </div>
              <div class="form-group">
                <label id="circuit-files-label" for="circuit-files"> Click here to load SVG</label>
                <input type="file" id="circuit-files" accept=".svg" />
              </div>
              <button id="btn-create" type="button">Create new</button>
            </form>
          </div>
          <div id="col-load">
            <form id="form-load-storage">
              <h3>Load from browser storage</h3>
              <select id="select-circuit">
                <option value="">--Choose your circuit--</option>
              </select>
              <h4>-------------------- OR ------------------</h4>
              <h3>Load from a file</h3>
              <div class="form-group">
                <label id="load-file-label" for="load-file"> Click here to load .heat file</label>
                <input type="file" id="load-file" accept=".heat" />
              </div>
              <button type="submit">Load</button>
            </form>
          </div>
        </div>
      </div>
    </div>

    <div id="editor">
      <div id="top-bar">
        <div id="save-btn">
          <i class="fa-icon fa-save"></i>
          <a id="download-anchor" style="display: none"></a>
        </div>
        <div id="save-compressed-btn">
          <i class="fa-icon fa-compressed"></i>
          <a id="download-anchor2" style="display: none"></a>
        </div>
        <div id="circuit-change-jpg"><i class="fa-icon fa-change-image"></i></div>
        <div id="display-circuit-id"></div>
        <div id="display-circuit-name"></div>
        <div id="display-circuit-lap"></div>
        <div id="number-laps"><i class="fa-icon fa-lap"></i>&nbsp;:&nbsp;<span id="number-laps-value"></span></div>
        <div id="heat-cards"><i class="icon heat"></i>&nbsp;:&nbsp;<span id="heat-cards-value"></span></div>
        <div id="stress-cards"><i class="icon reduce-stress"></i>&nbsp;:&nbsp;<span id="stress-cards-value"></span></div>
        <div id="number-corners"><i class="fa-icon fa-corner"></i>&nbsp;:&nbsp;<span id="number-corners-value"></span></div>
      </div>
      <div id="left-bar">
        <div id="cell-indicator">Cell: <span id="cell-indicator-counter">----</span></div>
        <div class="section" id="section-centers">
          <h2>Centers</h2>
          <div class="toolbar">
            <button id="show-centers"><i class="fa-icon fa-eye"></i></button>
            <button id="edit-centers"><i class="fa-icon fa-pencil"></i></button>
            <button id="generate-centers"><i class="fa-icon fa-compute"></i></button>
          </div>
        </div>
        <div class="section" id="section-directions">
          <h2>Directions</h2>
          <div class="toolbar">
            <button id="show-directions"><i class="fa-icon fa-eye"></i></button>
            <button id="edit-directions"><i class="fa-icon fa-pencil"></i></button>
            <button id="swap-directions"><i class="fa-icon fa-swap"></i></button>
            <button id="generate-directions"><i class="fa-icon fa-compute"></i></button>
          </div>
        </div>
        <div class="section" id="section-neighbours">
          <h2>Neighbours</h2>
          <div class="toolbar">
            <button id="show-neighbours"><i class="fa-icon fa-eye"></i></button>
            <button id="edit-neighbours"><i class="fa-icon fa-pencil"></i></button>
            <button id="generate-neighbours"><i class="fa-icon fa-compute"></i></button>
          </div>
        </div>
        <div class="section" id="section-lanes">
          <h2>Lanes</h2>
          <div class="toolbar">
            <button id="end1-lanes"><b>1</b> <i class="fa-icon fa-flag"></i></button>
            <button id="end2-lanes"><b>2</b> <i class="fa-icon fa-flag"></i></button>
          </div>
          <div class="toolbar">
            <button id="show-lanes"><i class="fa-icon fa-eye"></i></button>
            <button id="edit-lanes" disabled="disabled" style="pointer-events: none"><i class="fa-icon fa-pencil"></i></button>
            <button id="generate-lanes"><i class="fa-icon fa-compute"></i></button>
          </div>
        </div>

        <div id="filler"></div>
        <button style="display: none" id="force-refresh">Force refresh</button>
        <textarea style="display: none" id="data"></textarea>
      </div>
      <div id="main-frame">
        <div id="centers"></div>
      </div>
    </div>

    <script type="text/javascript" src="script.js"></script>
  </body>
</html>
